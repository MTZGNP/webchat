<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="../static/css/style.css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8">
  <title></title>

</head>

<body>


  <div id="all">

  </div>

  <center>

    <form class="form" id="sticky" style="position:sticky;" action="/send" method="post">
      <textarea id="box" class="msgbox" type="text" name="message" value=""></textarea>
      <button   class = "but" id="send" type="button" name="button">send</button>
    </form>
    <br><br><br>
    <div align = center>





      <a href="/logout"><button class="but" type="button" name="button">logout</button></a>
      &nbsp&nbsp<a href="/admin"> <button class="but" type="button" name="button">admin</button></a>
    </div>
    <script type="text/javascript">
      function loadlink() {
        $('#all').load('\\chat', function() {

        });
      }

      loadlink(); // This will run on page load
      setInterval(function() {
        loadlink() // this will run after every 5 seconds
      }, 1000);
      // this is the id of the submit button
  $(document).ready(function() {
        $("#sticky").bind("keypress", function(e) {
            if (e.keyCode == 13) {
                var url = "/send"; // the script where you handle the form input.

    $.ajax({
           type: "POST",
           url: url,
           data: $("#sticky").serialize(),
           // serializes the form's elements.
           success: function(data)
           {

           }
         });
    $('#sticky')[0].reset();
    $("#box").focus();

    return false; // avoid to execute the actual submit of the form.
            }
        });
    });
$("#send").click(function() {

    var url = "/send"; // the script where you handle the form input.

    $.ajax({
           type: "POST",
           url: url,
           data: $("#sticky").serialize(),
           // serializes the form's elements.
           success: function(data)
           {

           }
         });
    $('#sticky')[0].reset();
    $("#box").focus();

    return false; // avoid to execute the actual submit of the form.
});
    </script>
  </center>

</body>

</html>
